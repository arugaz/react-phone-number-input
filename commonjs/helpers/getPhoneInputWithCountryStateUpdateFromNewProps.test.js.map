{"version":3,"file":"getPhoneInputWithCountryStateUpdateFromNewProps.test.js","names":["getPhoneInputWithCountryStateUpdateFromNewProps","newProps","prevProps","state","_getPhoneInputWithCountryStateUpdateFromNewProps","metadata","describe","it","reset","defaultCountry","should","deep","equal","phoneDigits","undefined","value","country","hasUserSelectedACountry","international","expect","to","be"],"sources":["../../source/helpers/getPhoneInputWithCountryStateUpdateFromNewProps.test.js"],"sourcesContent":["import metadata from 'libphonenumber-js/min/metadata'\n\nimport _getPhoneInputWithCountryStateUpdateFromNewProps from './getPhoneInputWithCountryStateUpdateFromNewProps.js'\n\nfunction getPhoneInputWithCountryStateUpdateFromNewProps(newProps, prevProps, state) {\n\treturn _getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t{\n\t\t\t...newProps,\n\t\t\tmetadata\n\t\t},\n\t\t{\n\t\t\t...prevProps,\n\t\t\tmetadata\n\t\t},\n\t\tstate\n\t)\n}\n\ndescribe('getPhoneInputWithCountryStateUpdateFromNewProps', () => {\n\tit('should get state update from new props (reset)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\treset: true,\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined,\n\t\t\tcountry: 'RU',\n\t\t\thasUserSelectedACountry: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (reset) (international)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\treset: true,\n\t\t\t\tinternational: true,\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tphoneDigits: '+7',\n\t\t\tvalue: undefined,\n\t\t\tcountry: 'RU',\n\t\t\thasUserSelectedACountry: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (default country did not change)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (default country changed) (no `value`)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (default country changed) (no `value`) (new country not supported)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'XX'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (default country changed) (`value` is intl prefix)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tinternational: true,\n\t\t\t\tdefaultCountry: 'CA'\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternational: true,\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+1'\n\t\t\t}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'CA',\n\t\t\tphoneDigits: '+1',\n\t\t\tvalue: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (default country changed) (has `value`)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'FR'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (default country changed to `undefined`) (has `value`)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: undefined,\n\t\t\t\tdefaultCountry: 'FR'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: undefined,\n\t\t\t\tdefaultCountry: undefined\n\t\t\t},\n\t\t\t{}\n\t\t)).to.deep.equal({\n\t\t\tcountry: 'FR',\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (`value` changed: undefined -> value)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'FR'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: '+78005553535',\n\t\t\tvalue: '+78005553535'\n\t\t})\n\t})\n\n\tit('should get state update from new props (`value` changed: value -> undefined)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined,\n\t\t\thasUserSelectedACountry: undefined\n\t\t})\n\t})\n\n\t// https://github.com/catamphetamine/react-phone-number-input/issues/377\n\tit('should get state update from new props (`value` changed: undefined -> +78)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{ value: '+78' },\n\t\t\t{},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: '+78',\n\t\t\tvalue: '+78'\n\t\t})\n\t})\n\n\tit('should get state update from new props (`value` changed, but already displayed)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (`value` did not change)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n})"],"mappings":"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"}